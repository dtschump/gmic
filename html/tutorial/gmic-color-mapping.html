<!DOCTYPE html>
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="tutorial.css">
<script type="text/javascript" src="highslide/highslide.js"></script>
<link rel="stylesheet" type="text/css" href="highslide/highslide.css" />
<script type="text/javascript">
hs.graphicsDir = 'highslide/graphics/';
hs.wrapperClassName = 'wide-border';
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<body>


      



<h1 id="GmicColorMapping">G'MIC Color Mapping</h1>
<div id="FigureOne" width="4.167in" height="4.0in" style="float: left;"><a target="_parent" class="intern" href="img/gmic-color-mapping_cm_016.jpg" class="highslide" onclick="return hs.expand(this)"><img style="margin: 5px; border: 0px solid #808080;" class="img_block" title="New Orleans Fish: July 2000" src="http://www.particularart.com/static/media/uploads/technotes/colormap/cm_016_s.png" width="400" height="300" /></a>
<p style="font-size: small; line-height: 100%;"><i>Figure 1: New Orleans Fish: July, 2000<br /></i></p>
</div>
<p>The premise underlying <a target="_parent" href="_colormap.shtml"><tt>-colormap</tt></a> is that images probably do not use all 16,777,216 colors available to them in three 8 bit channels (281,474,976,710,656 colors for 16 bits). For many images, certain hues, saturations and lightnesses are more prevalent than others. It is likely that colors cluster around various medians, and it may even be that the clustering is quite &ldquo;tight&rdquo;, that is, not much variation around these means. If we were to plot all the colors of such an image in an RGB color cube<sup>*</sup>, the points would form clouds around (perhaps just a few) centers and much of the remaining color space would be nearly empty.</p>
<p>The game is to find the clusters. G'MIC harnesses two well-known algorithms from statistics and computer vision. The <i>median-cut algorithm</i> is the workhorse; it estimates an initial palette that suffices for many purposes.</p>
<p>For the picky, there is the <i>k-means algorithm</i>, which refines the results of median-cut. This algorithm <em><a target="_parent" href="_index.shtml">indexes</a></em> the given original using a trial palette generated by the median-cut method, then makes a new palette based on the <em><a target="_parent" href="http://gmic.eu/reference.shtml#histogram">histograms</a></em> of the indexed image. If the colors of the trial palette accurately reflect the clustering inherent in the image, the new and trial palettes should be identical. Otherwise, the k-means algorithm tries the new palette in a second round and iterates until differences between two successive palettes fall below a given tolerance.</p>
<p>For students of <tt>gmic</tt>, <tt>-colormap's</tt> implementation contains a number of interesting code bits. The full source is part of the standard G'MIC script library, <tt>gmic_stdlib.gmic</tt>. You may browse a current copy at <a target="_parent" href="http://gmic.eu/gmic_stdlib.gmic"><tt>gmic.eu/gmic_stdlib.gmic</tt></a> or fork the project at <a target="_parent" href="https://github.com/dtschump/gmic"><tt>github.com</tt></a> where <tt>gmic_stdlib.gmic</tt> can be found in the <tt>src</tt> directory. Fetch a copy for the following walk throughs.</p>
<ol>
<li><a target="_parent" href="gmic-color-mapping_median-cut-algorithm.shtml">Median Cut Algorithm</a></li>
<li><a target="_parent" href="gmic-color-mapping_k-means-algorithm.shtml">K-Means Algorithm</a></li>
</ol><hr style="border: 0px solid #808080;" />
<div id="sdfootnote1">
<p class="sdfootnote-western" style="font-size: small;"><a target="_parent" class="sdfootnotesym" name="sdfootnote1sym"></a>* See David Tschumperl&eacute;'s &ldquo;<a target="_parent" class="extern" href="http://opensource.graphics/visualizing-the-3d-point-cloud-of-rgb-colors/">Visualizing The 3D Point Clouds</a>&rdquo; at <a target="_parent" class="extern" href="http://opensource.graphics/">opensource.graphics</a></p>
</div>



   
</body></html>